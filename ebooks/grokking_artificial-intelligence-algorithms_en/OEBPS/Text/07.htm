<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" class="calibre">
  <head>
    <meta content="Microsoft Word 15 (filtered)" name="Generator"/>
    <title>Style A ReadMe</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="../../stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="../../page_styles1.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre8">
  <div class="wordsection">
    <h1 class="cochapternumber">7<span class="calibre16">  </span> Swarm intelligence: Particles</h1>

    <p class="cosummaryhead">This chapter covers</p>

    <p class="cosummarybulletcxspfirst"><span class="calibre17">·<span class="calibre14">    </span></span> Understanding the inspiration for particle swarm intelligence algorithms</p>

    <p class="cosummarybulletcxspmiddle"><span class="calibre17">·<span class="calibre14">    </span></span> Understanding and solving optimization problems</p>

    <p class="cosummarybulletcxsplast"><span class="calibre17">·<span class="calibre14">    </span></span> Designing and implementing a particle swarm optimization algorithm</p>

    <h2 class="head" id="sigil_toc_id_120">7.1<span class="calibre10">     </span> What is particle swarm optimization?</h2>

    <p class="body1">Particle swarm optimization is another swarm algorithm. Swarm intelligence relies on emergent behavior of many individuals to solve difficult problems as a collective. We saw in chapter 6 how ants can find the shortest paths between destinations through their use of pheromones.</p>

    <p class="body1">Bird flocks are another ideal example of swarm intelligence in nature. When a single bird is flying, it might attempt several maneuvers and techniques to preserve energy, such as jumping and gliding through the air or leveraging wind currents to carry it in the direction in which it intends to travel. This behavior indicates some primitive level of intelligence in a single individual. But birds also have need to migrate during different seasons. In winter, there is less availability of insects and other food. Suitable nesting locations also become scarce. Birds tend to flock to warmer areas to take advantage of better weather conditions, which improves the likelihood of survival. Migration is usually not a short trip. It takes thousands of kilometers of movement to arrive at an area with suitable conditions. When birds travel these long distances, they tend to flock. Birds flock because there is strength in numbers when facing predators; additionally, it saves energy. The formation that we observe in bird flocks has several advantages. A large, strong bird will take the lead, and when it flaps its wings, it creates uplift for the birds behind it. These birds can fly while using significantly less energy. Flocks can change leaders if the direction changes or if the leader becomes fatigued. When a specific bird moves out of formation, it experiences more difficulty in flying via air resistance and corrects its movement to get back into formation. Figure 7.1 illustrates a bird flock formation; you may have seen something similar.</p>

    <p class="figure"><img alt="07_01" class="calibre11" src="../Images/07_01.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.1 An example bird flock formation</p>

    <p class="body1">Craig Reynolds developed a simulator program in 1987 to understand the attributes of emergent behavior in bird flocks and used the following rules to guide the group. These rules are extracted from observation of bird flocks:</p>

    <p class="listbulletcxspfirst1"><span class="calibre17">·<span class="calibre14">     </span></span> <span class="italics">Alignment</span>—An individual should steer in the average heading to its neighbors to ensure that the group travels in a similar direction.</p>

    <p class="listbulletcxspmiddle"><span class="calibre17">·<span class="calibre14">     </span></span> <span class="italics">Cohesion</span>—An individual should move toward the average position of its neighbors to maintain the formation of the group.</p>

    <p class="listbulletcxsplast"><span class="calibre17">·<span class="calibre14">     </span></span> <span class="italics">Separation</span>—An individual should avoid crowding or colliding with its neighbors to ensure that individuals do not collide, disrupting the group.</p>

    <p class="body1">Additional rules are used in different variants of attempting to simulate swarm behavior. Figure 7.2 illustrates the behavior of an individual in different scenarios, as well as the direction in which it is influenced to move to obey the respective rule. Adjusting movement is a balance of these three principles shown in the figure.</p>

    <p class="figure"><img alt="07_02" class="calibre11" src="../Images/07_02.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.2 Rules that guide a swarm</p>

    <p class="body1">Particle swarm optimization involves a group of individuals at different points in the solution space, all using real-life swarm concepts to find an optimal solution in the space. This chapter dives into the workings of the particle swarm optimization algorithm and shows how it can be used to solve problems. Imagine a swarm of bees that spreads out looking for flowers and gradually converges on an area that has the most density of flowers. As more bees find the flowers, more are attracted to the flowers. At its core, this example is what particle swarm optimization entails.</p>

    <p class="figure"><img alt="07_03" class="calibre11" src="../Images/07_03.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.3 A bee swarm converging on its goal</p>

    <p class="body1">Optimization problems have been mentioned in several chapters. Finding the optimal path through a maze, determining the optimal items for a knapsack, and finding the optimal path between attractions in a carnival are examples of optimization problems. We worked through them without diving into the details behind them. From this chapter on, however, a deeper understanding of optimization problems is important. Section 7.2 works through some of the intuition to be able to spot optimization problems when they occur.</p>

    <h2 class="head" id="sigil_toc_id_121">7.2<span class="calibre10">     </span> Optimization problems: A slightly more technical perspective</h2>

    <p class="body1">Suppose that we have several peppers of different sizes. Usually, small peppers tend to be spicier than large peppers. If we plot all the peppers on a chart based on size and <a class="pcalibre3 pcalibre1" id="OLE_LINK2"></a><a class="pcalibre3 pcalibre1" id="OLE_LINK1">spiciness</a>, it may look like figure 7.4.</p>

    <p class="figure"><img alt="07_04" class="calibre11" src="../Images/07_04.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.4 Pepper spice versus pepper size</p>

    <p class="body1">The figure depicts the size of each pepper and how spicy it is. Now, by removing the imagery of the peppers, plotting the data points, and drawing a possible curve between them, we are left with figure 7.5. If we had more peppers, we would have more data points, and the curve would be more accurate.</p>

    <p class="figure"><img alt="07_05" class="calibre11" src="../Images/07_05.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.5 Pepper spice versus pepper size trend</p>

    <p class="body1">This example could potentially be an optimization problem. If we searched for a minimum from left to right, we would come across several points less than the previous ones, but in the middle, we encounter one that is higher. Should we stop? If we did, we would be missing the actual minimum, which is the last data point, known as the <span class="italics">global minimum</span>.</p>

    <p class="body1">The trend line/curve that is approximated can be represented by a function, such as the one shown in figure 7.6. This function can be interpreted as the spiciness of the pepper being equal to the result of this function where the size of the pepper is represented by x.</p>

    <p class="figure"><img alt="07_06" class="calibre11" src="../Images/07_06.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.6 An example function for pepper spice versus pepper size</p>

    <p class="body1">Real-world problems typically have thousands of data points, and the minimum output of the function is not as clear as this example. The search spaces are massive and difficult to solve by hand.</p>

    <p class="body1">Notice that we have used only 2 properties of the pepper to create the data points, which resulted in a simple curve. If we consider another property of the pepper, such as color, the representation of the data changes significantly. Now the chart has to be represented in 3D, and the trend becomes a surface instead of a curve. A surface is like a warped blanket in three dimensions (figure 7.7). This surface is also represented as a function but is more complex.</p>

    <p class="figure"><img alt="07_07" class="calibre11" src="../Images/07_07.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.7 Pepper spice versus pepper size versus pepper color</p>

    <p class="body1">Furthermore, a 3D search space could look fairly simple, like figure 7.7, or be so complex that attempting to inspect it visually to find the minimum is almost impossible.</p>

    <p class="figure"><img alt="07_08" class="calibre11" src="../Images/07_08.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.8 A function visualized in the 3D space as a plane</p>

    <p class="body1">Here’s the function that represents this plane:</p>

    <p class="figure"><img alt="07_09" class="calibre11" src="../Images/07_09.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.9 The function that represents the surface in figure 7.8</p>

    <p class="body1">It gets more interesting! We have looked at three attributes of a pepper: its size, its color, and how spicy it is. As a result, we’re searching in 3 dimensions. What if we want to include location of growth? This attribute would make it even more difficult to visualize and understand the data, because we are searching in 4 dimensions. If we added the pepper’s age and the amount of fertilizer used while growing it, we are left with a massive search space in 6 dimensions, and we can’t imagine what this search might look like. This search too is represented by a function, but again, it is too complex and difficult for a person to solve.</p>

    <p class="body1">Particle swarm optimization algorithms are particularly good at solving difficult optimization problems. Particles are distributed over the multidimensional search space and work together to find good maximums or minimums.</p>

    <p class="body1">Particle swarm optimization algorithms are particularly useful in the following scenarios:</p>

    <p class="listbulletcxspfirst1"><span class="calibre17">·<span class="calibre14">     </span></span> <span class="italics">Large search spaces</span>—There are many data points and possibilities of combinations.</p>

    <p class="listbulletcxsplast"><span class="calibre17">·<span class="calibre14">     </span></span> <span class="italics">Search spaces with high dimensions</span>—There is complexity in high dimensions. Many dimensions of a problem are required to find a good solution.</p>

    <p class="head2">Exercise: How many dimensions will the search space for the following scenario be?</p>

    <p class="body1">In this scenario, we need to determine a good city to live in based on the average minimum temperature during the year, because we don’t like the cold. It is also important that the population be less than 700,000 people, because crowded areas can be inconvenient. The average property price should be as little as possible, and the more trains are in the city, the better.</p>

    <p class="head2">Solution: How many dimensions will the search space for the following scenario be?</p>

    <p class="body1">The problem in this scenario consists of five dimensions:</p>

    <p class="listbulletcxspfirst1"><span class="calibre17">·<span class="calibre14">     </span></span> Average temperature</p>

    <p class="listbulletcxspmiddle"><span class="calibre17">·<span class="calibre14">     </span></span> Size of population</p>

    <p class="listbulletcxspmiddle"><span class="calibre17">·<span class="calibre14">     </span></span> Average price of property</p>

    <p class="listbulletcxspmiddle"><span class="calibre17">·<span class="calibre14">     </span></span> Number of trains</p>

    <p class="listbulletcxsplast"><span class="calibre17">·<span class="calibre14">     </span></span> Result of these attributes, which will inform our decision</p>

    <h2 class="head" id="sigil_toc_id_122">7.3<span class="calibre10">     </span> Problems applicable to particle swarm optimization</h2>

    <p class="body1">Imagine that we are developing a drone, and several materials are used to create its body and propeller wings (the blades that make it fly). Through many research trials, we have found that different amounts of two specific materials yield different results in terms of optimal performance for lifting the drone and resisting strong winds. These two materials are aluminum, for the chassis, and plastic, for the blades. Too much or too little of either material will result in a poor-performing drone. But several combinations yield a good-performing drone, and only one combination results in an exceptionally well-performing drone.</p>

    <p class="body1">Figure 7.10 illustrates the components made of plastic and the components made of aluminum. The arrows illustrate the forces that influence the performance of the drone.</p>

    <p class="body1">In simple terms, we want to find a good ratio of plastic to aluminum for a version of the drone that reduces drag during lift and decreases wobble in the wind. So plastic and aluminum are the inputs, and the output is the resulting stability of the drone. Let’s describe ideal stability as reducing drag during liftoff and wobble in the wind.</p>

    <p class="figure"><img alt="07_10" class="calibre11" src="../Images/07_10.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.10 The drone optimization example</p>

    <p class="body1">Precision in the ratio of aluminum and plastic is important, and the range of possibilities is large.</p>

    <p class="body1">In this scenario, researchers have found the function for the ratio of aluminum and plastic. We will use this function in a simulated virtual environment that tests the drag and wobble to find the best values for each material before we manufacture another prototype drone. We also know that the maximum and minimum ratios for the materials are 10 and -10, respectively. This fitness function is similar to a heuristic.</p>

    <p class="body1">Figure 7.11 shows the fitness function for the ratio between aluminum(x) and plastic(y). The result is a performance score based on drag and wobble, given the input values for x and y.</p>

    <p class="figure"><img alt="07_11" class="calibre11" src="../Images/07_11.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.11 The example function for optimizing aluminum(x) and plastic(y)</p>

    <p class="body1">How can we find the amount of aluminum and the amount of plastic required to create a good drone? One possibility is to try every combination of values for aluminum and plastic until we find the best ratio of materials for our drone. Take a step back and imagine the amount of computation required to find this ratio. We could conduct an almost-infinite number of computations before finding a solution if we try every possible number. We need to compute the result for the items in table 7.1. Note that negative numbers for aluminum and plastic are bizarre in reality, however, we’re using them in this example to demonstrate the fitness function used to optimize these values.</p>

    <p class="tablecaption">Table 7.1 Possible values for aluminum and plastic compositions</p>

    <table border="1" cellpadding="0" cellspacing="0" class="msotablegrid2">
      <tr class="calibre54">
        <td char="252" class="calibre69">
          <div class="calibre26">
            <p class="tablehead">How many parts aluminum? (x)</p>
          </div>
        </td>

        <td char="251" class="calibre70">
          <div class="calibre26">
            <p class="tablehead">How many parts plastic? (y)</p>
          </div>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="252" class="calibre71">
          <p class="tablebody1">-0,1</p>
        </td>

        <td char="251" class="calibre72">
          <p class="tablebody1">1,34</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="252" class="calibre71">
          <p class="tablebody1">-0,134</p>
        </td>

        <td char="251" class="calibre72">
          <p class="tablebody1">0,575</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="252" class="calibre71">
          <p class="tablebody1">-1,1</p>
        </td>

        <td char="251" class="calibre72">
          <p class="tablebody1">0,24</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="252" class="calibre71">
          <p class="tablebody1">-1,1645</p>
        </td>

        <td char="251" class="calibre72">
          <p class="tablebody1">1,432</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="252" class="calibre71">
          <p class="tablebody1">-2,034</p>
        </td>

        <td char="251" class="calibre72">
          <p class="tablebody1">-0,65</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="252" class="calibre71">
          <p class="tablebody1">-2,12</p>
        </td>

        <td char="251" class="calibre72">
          <p class="tablebody1">-0,874</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="252" class="calibre71">
          <p class="tablebody1">0,743</p>
        </td>

        <td char="251" class="calibre72">
          <p class="tablebody1">-1,1645</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="252" class="calibre71">
          <p class="tablebody1">0,3623</p>
        </td>

        <td char="251" class="calibre72">
          <p class="tablebody1">-1,87</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="252" class="calibre71">
          <p class="tablebody1">1,75</p>
        </td>

        <td char="251" class="calibre72">
          <p class="tablebody1">-2,7756</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="252" class="calibre71">
          <p class="tablebody1">…</p>
        </td>

        <td char="251" class="calibre72">
          <p class="tablebody1">…</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="252" class="calibre71">
          <p class="tablebody1"><span class="italics">-10 ≥ Aluminum ≥ 10</span></p>
        </td>

        <td char="251" class="calibre72">
          <p class="tablebody1"><span class="italics">-10 ≥ Plastic ≥ 10</span></p>
        </td>
      </tr>
    </table>

    <p class="body1">This computation will go on for every possible number between the constraints and is computationally expensive, so it is realistically impossible to brute-force this problem. A better approach is needed.</p>

    <p class="body1">Particle swarm optimization provides a means to search a large search space without checking every value in each dimension. In the drone problem, aluminum is one dimension of the problem, plastic is the second dimension, and the resulting performance of the drone is the third dimension.</p>

    <p class="body1">In section 7.4, we determine the data structures required to represent a particle, including the data about the problem that it will contain.</p>

    <h2 class="head" id="sigil_toc_id_123">7.4<span class="calibre10">     </span> Representing state: What do particles look like?</h2>

    <p class="body1">Because particles move across the search space, the concept of a particle must be defined.</p>

    <p class="figure"><img alt="07_12" class="calibre11" src="../Images/07_12.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.12 Properties of a particle</p>

    <p class="body1">Representing the concept of a particle:</p>

    <p class="listbulletcxspfirst1"><span class="calibre17">·<span class="calibre14">     </span></span> <span class="italics">Position</span>—The position of the particle in all dimensions</p>

    <p class="listbulletcxspmiddle"><span class="calibre17">·<span class="calibre14">     </span></span> <span class="italics">Best position</span>—The best position found using the fitness function</p>

    <p class="listbulletcxsplast"><span class="calibre17">·<span class="calibre14">     </span></span> <span class="italics">Velocity</span>—The current velocity of the particle’s movement</p>

    <p class="codelistingcaption">Pseudocode</p>

    <p class="body1">To fulfill the three attributes of a particle, including position, best position, and velocity, the following properties are required in a constructor of the particle for the various operations of the particle swarm optimization algorithm. Don’t worry about the inertia, cognitive component, and social component right now; they will be explained in upcoming sections.</p>

    <p class="figure"><img alt="07_12a" class="calibre11" src="../Images/07_12a.png"/><br class="calibre12"/></p>

    <h2 class="head" id="sigil_toc_id_124">7.5<span class="calibre10">     </span> Particle swarm optimization life cycle</h2>

    <p class="body1">The approach to designing a particle swarm optimization algorithm is based on the problem space being addressed. Each problem has a unique context and a different domain in which data is represented. Solutions to different problems are also measured differently. Let’s dive into how a particle swarm optimization can be designed to solve the drone construction problem.</p>

    <p class="body1">The general life cycle of a particle swarm optimization algorithm is as follows:</p>

    <p class="listnumbered">1.<span class="calibre14">  </span> <span class="italics">Initialize the population of particles.</span> Determine the number of particles to be used, and initialize each particle to a random position in the search space.</p>

    <p class="listnumbered">2.<span class="calibre14">  </span> <span class="italics">Calculate the fitness of each particle.</span> Given the position of each particle, determine the fitness of that particle at that position.</p>

    <p class="listnumbered">3.<span class="calibre14">  </span> <span class="italics">Update the position of each particle.</span> Repetitively update the position of all the particles, using principles of swarm intelligence. Particles will explore the search space then converge to good solutions.</p>

    <p class="listnumbered">4.<span class="calibre14">  </span> <span class="italics">Determine the stopping criteria.</span> Determine when the particles stop updating and the algorithm stops.</p>

    <p class="figure"><img alt="07_13" class="calibre11" src="../Images/07_13.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.13 The life cycle of a particle swarm optimization algorithm</p>

    <p class="body1">The particle swarm optimization algorithm is fairly simple, but the details of step 3 are particularly intricate. Section following sections look at each step in isolation and uncovers the details that makes the algorithm work.</p>

    <h3 class="head1" id="sigil_toc_id_125">7.5.1<span class="calibre15">  </span> Initialize the population of particles</h3>

    <p class="body1">The algorithm starts by creating a specific number of particles, which will remain the same for the lifetime of the algorithm.</p>

    <p class="figure"><img alt="07_14" class="calibre11" src="../Images/07_14.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.14 Setup particles</p>

    <p class="body1">The three factors that are important in initializing the particles are</p>

    <p class="listbulletcxspfirst1"><span class="calibre17">·<span class="calibre14">     </span></span> <span class="italics">Number of particles</span>—The number of particles influences computation. The more particles that exist, the more computation is required. Additionally, more particles will likely mean that converging on a global best solution will take longer because more particles are attracted to their local best solutions. The constraints of the problem also affect the number of particles. A larger search space may need more particles to explore it. There could be as many as 1,000 particles or as few as 4. Usually, 50 to 100 particles produce good solutions without being too computationally expensive.</p>

    <p class="listbulletcxspmiddle"><span class="calibre17">·<span class="calibre14">     </span></span> <span class="italics">Starting position for each particle</span>—The starting position for each particle should be a random position in all the respective dimensions. It is important that the particles are distributed evenly across the search space. If most of the particles are in a specific region of the search space, they will struggle to find solutions outside that area.</p>

    <p class="listbulletcxsplast"><span class="calibre17">·<span class="calibre14">     </span></span> <span class="italics">Starting velocity for each particle</span>—The velocity of particles are initialized to 0 because the particles have not been affected yet. A good analogy is that birds begin take off for flight from a stationary position.</p>

    <p class="figure"><img alt="07_15" class="calibre11" src="../Images/07_15.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.15 A visualization of the initial positions of 4 particles in a 3D plane</p>

    <p class="body1">Table 7.2 describes the data encapsulated by each particle at the initialization step of the algorithm. Notice that the velocity is 0; the current fitness and best fitness values are 0 because they have not been calculated yet.</p>

    <p class="tablecaption">Table 7.2 Data attributes for each particle</p>

    <table border="1" cellpadding="0" cellspacing="0" char="505" class="msotablegrid3">
      <tr class="calibre54">
        <td char="63" class="calibre73">
          <div class="calibre26">
            <p class="tablehead">Particle</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Velocity</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Current aluminum (x)</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Current plastic (y)</p>
          </div>
        </td>

        <td char="63" class="calibre75">
          <div class="calibre26">
            <p class="tablehead">Current fitness</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Best aluminum (x)</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Best plastic (y)</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Best fitness</p>
          </div>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">7</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1">0</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">7</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">2</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">9</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1">0</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">9</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">3</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-10</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1">0</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-10</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">4</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-2</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-5</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1">0</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-2</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-5</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0</p>
        </td>
      </tr>
    </table>

    <p class="codelistingcaption">Pseudocode</p>

    <p class="body1">The method to generate a swarm consists of creating an empty list and appending new particles to it. The key factors are</p>

    <p class="listbulletcxspfirst1"><span class="calibre17">·<span class="calibre14">     </span></span> Ensuring that the number of particles is configurable.</p>

    <p class="listbulletcxspmiddle"><span class="calibre17">·<span class="calibre14">     </span></span> Ensuring that the random number generated is done uniformly; numbers are distributed across the search space within the constraints. This implementation depends on the features of the random number generator used.</p>

    <p class="listbulletcxsplast"><span class="calibre17">·<span class="calibre14">     </span></span> Ensuring that the constraints of the search space are specified, in this case -10 and 10 for both x and y of the particle.</p>

    <p class="figure"><img alt="07_15a" class="calibre11" src="../Images/07_15a.png"/><br class="calibre12"/></p>

    <h3 class="head1" id="sigil_toc_id_126">7.5.2<span class="calibre15">  </span> Calculate the fitness of each particle</h3>

    <p class="body1">The next step is calculating the fitness of each particle at its current position. The fitness of particles is calculated every time the entire swarm changes position.</p>

    <p class="figure"><img alt="07_16" class="calibre11" src="../Images/07_16.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.16 Calculate fitness of particles</p>

    <p class="body1">In the drone scenario, the scientists provided a function in which the result is the amount of drag and wobble given a specific number of aluminum and plastic components. This function is used as the fitness function in the particle swarm optimization algorithm in this example.</p>

    <p class="figure"><img alt="07_17" class="calibre11" src="../Images/07_17.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.17 The example function for optimizing aluminum(x) and plastic(y)</p>

    <p class="body1">If x is aluminum and y is plastic, the following calculations can be made for each particle to determine its fitness by substituting x and y for the values of aluminum and plastic.</p>

    <p class="figure"><img alt="07_18" class="calibre11" src="../Images/07_18.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.18 Fitness calculations for each particle</p>

    <p class="body1">Now the table of particles represents the calculated fitness for each particle. It is also set as the best fitness for each particle because it is the only known fitness in the first iteration. After the first iteration, the best fitness for each particle is be the best fitness in each specific particle’s history.</p>

    <p class="tablecaption">Table 7.3 Data attributes for each particle</p>

    <table border="1" cellpadding="0" cellspacing="0" char="505" class="msotablegrid3">
      <tr class="calibre54">
        <td char="63" class="calibre73">
          <div class="calibre26">
            <p class="tablehead">Particle</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Velocity</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Current aluminum (x)</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Current plastic (y)</p>
          </div>
        </td>

        <td char="63" class="calibre75">
          <div class="calibre26">
            <p class="tablehead">Current fitness</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Best aluminum (x)</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Best plastic (y)</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Best fitness</p>
          </div>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">7</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1"><span class="bold">296</span></p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">7</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">296</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">2</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">9</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1"><span class="bold">104</span></p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">9</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">104</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">3</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-10</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1"><span class="bold">80</span></p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-10</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">80</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">4</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-2</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-5</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1"><span class="bold">365</span></p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-2</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-5</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">365</p>
        </td>
      </tr>
    </table>

    <p class="head2">Exercise: What would the fitness be for the following inputs given the drone fitness function?</p>

    <p class="figure"><img alt="07_18a" class="calibre11" src="../Images/07_18a.png"/><br class="calibre12"/></p>

    <table border="1" cellpadding="0" cellspacing="0" char="505" class="msotablegrid3">
      <tr class="calibre54">
        <td char="63" class="calibre73">
          <div class="calibre26">
            <p class="tablehead">Particle</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Velocity</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Current aluminum (x)</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Current plastic (y)</p>
          </div>
        </td>

        <td char="63" class="calibre75">
          <div class="calibre26">
            <p class="tablehead">Current fitness</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Best aluminum (x)</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Best plastic (y)</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Best fitness</p>
          </div>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">5</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-3</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1">0</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">5</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-3</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">2</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-6</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-1</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1">0</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-6</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">3</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">7</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">3</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1">0</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">7</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">3</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">4</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">9</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1">0</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">9</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0</p>
        </td>
      </tr>
    </table>

    <p class="head2">Solution: What would the fitness be for the following inputs given the drone fitness function?</p>

    <p class="figure"><img alt="07_18b" class="calibre11" src="../Images/07_18b.png"/><br class="calibre12"/></p>

    <p class="codelistingcaption">Pseudocode</p>

    <p class="body1">The fitness function is representing the mathematical function in code. Any math library will contain the operations required, such as a power function and a square-root function.</p>

    <p class="figure"><img alt="07_18c" class="calibre11" src="../Images/07_18c.png"/><br class="calibre12"/></p>

    <p class="body1">The function for updating the fitness of a particle is also trivial, in that it determines whether the new fitness is better than a past best and then stores that information.</p>

    <p class="figure"><img alt="07_18d" class="calibre11" src="../Images/07_18d.png"/><br class="calibre12"/></p>

    <p class="body1">The function to determine the best particle in the swarm iterates through all particles, updates their fitness based on their new positions, and finds the particle that yields the smallest value for the fitness function. In this case, we are minimizing, so a smaller value is better.</p>

    <p class="figure"><img alt="07_18e" class="calibre11" src="../Images/07_18e.png"/><br class="calibre12"/></p>

    <h3 class="head1" id="sigil_toc_id_127">7.5.3<span class="calibre15">  </span> Update the position of each particle</h3>

    <p class="body1">The update step of the algorithm is the most intricate, because it is where the magic happens. The update step encompasses the properties of swarm intelligence in nature into a mathematical model that allows the search space to be explored while honing on good solutions.</p>

    <p class="figure"><img alt="07_19" class="calibre11" src="../Images/07_19.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.19 Update position of particles</p>

    <p class="body1">Particles in the swarm update their position given a cognitive ability and factors in the environment around them such as inertia and what the swarm is doing. These factors influence the velocity and position of each particle. The first step is understanding how velocity is updated. The velocity determines the direction and speed of movement of the particle.</p>

    <p class="body1">The particles in the swarm move to different points in the search space to find better solutions. Each particle relies on its memory of a good solution and the knowledge of the swarm’s best solution. Figure 7.20 illustrates the movement of the particles in the swarm as their positions are updated.</p>

    <p class="figure"><img alt="07_20" class="calibre11" src="../Images/07_20.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.20 The movement of particles over 5 iterations</p>

    <p class="head2">The components of updating velocity</p>

    <p class="body1">Three components are used to calculate the new velocity of each particle: inertia, cognitive, and social. Each component influences the movement of the particle. We will look at each of components in isolation before diving into how they are combined to update the velocity and, ultimately, the position of a particle:</p>

    <p class="listbullet"><span class="calibre17">·<span class="calibre14">     </span></span> <span class="italics">Inertia</span>—The inertia component represents the resistance of movement or change in direction for a specific particle that influences its velocity. The inertia component consists of two values: the inertia magnitude and the current velocity of the particle. The inertia value is a number between 0 and 1.</p>

    <p class="figure"><img alt="07_20a" class="calibre11" src="../Images/07_20a.png"/><br class="calibre12"/></p>

    <p class="listbulletsubcxspfirst"><span class="calibre79">o<span class="calibre14">   </span></span> A value closer to 0 translates to exploration, potentially taking more iterations.</p>

    <p class="listbulletsubcxsplast"><span class="calibre79">o<span class="calibre14">   </span></span> A value closer to 1 translates to more exploration for particles in fewer iterations.</p>

    <p class="listbullet"><span class="calibre17">·<span class="calibre14">     </span></span> <span class="italics">Cognitive</span>—The cognitive component represents the internal cognitive ability of a specific particle. The cognitive ability is a sense of a particle knowing its best position and using that position to influence its movement. The cognitive constant is a number greater than 0 and less than 2. A greater cognitive constant means more exploitation by the particles.</p>

    <p class="figure"><img alt="07_20b" class="calibre11" src="../Images/07_20b.png"/><br class="calibre12"/></p>

    <p class="listbullet"><span class="calibre17">·<span class="calibre14">     </span></span> <span class="italics">Social</span>—The social component represents the ability of a particle to interact with the swarm. A particle knows the best position in the swarm and uses this information to influence its movement. Social acceleration is determined by using a constant and scaling it with a random number. The social constant remains the same for the lifetime of the algorithm, and the random factor encourages diversity in favoring the social factor.</p>

    <p class="figure"><img alt="07_20c" class="calibre11" src="../Images/07_20c.png"/><br class="calibre12"/></p>

    <p class="body1">The greater the social constant, the greater exploration there will be, because the particle favors its social component more. The social constant is a number between 0 and 2. A greater social constant means more exploration.</p>

    <p class="head2">Updating velocity</p>

    <p class="body1">Now that we understand the inertia component, cognitive component, and social component, let’s look at how they can be combined to update a new velocity for the particles.</p>

    <p class="figure"><img alt="07_21" class="calibre11" src="../Images/07_21.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.21 Formula to calculate velocity</p>

    <p class="body1">By looking at the math, we may find it difficult to understand how the different components in the function affect the velocity of the particles. Figure 7.22 depicts how the different factors influence a particle.</p>

    <p class="figure"><img alt="07_22" class="calibre11" src="../Images/07_22.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.22 The intuition of the factors influencing velocity updates</p>

    <p class="body1">Table 7.4 shows the attributes of each particle after the fitness of each was calculated.</p>

    <p class="tablecaption">Table 7.4 Data attributes for each particle</p>

    <table border="1" cellpadding="0" cellspacing="0" char="505" class="msotablegrid3">
      <tr class="calibre54">
        <td char="63" class="calibre73">
          <div class="calibre26">
            <p class="tablehead">Particle</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Velocity</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Current aluminum</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Current plastic</p>
          </div>
        </td>

        <td char="63" class="calibre75">
          <div class="calibre26">
            <p class="tablehead">Current fitness</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Best aluminum</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Best plastic</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Best fitness</p>
          </div>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">7</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1">296</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">2</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">4</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">296</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">2</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">9</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1">104</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">9</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">104</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">3</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-10</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1">80</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-10</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">80</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">4</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-2</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-5</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1">365</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-2</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-5</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">365</p>
        </td>
      </tr>
    </table>

    <p class="body1">Next, we will dive into the velocity update calculations for a particle, given the formulas that we have worked through.</p>

    <p class="body1">Here are the constant configurations that have been set for this scenario:</p>

    <p class="listbulletcxspfirst1"><span class="calibre17">·<span class="calibre14">     </span></span> <span class="italics">Inertia is set to 0.2.</span> This setting favors slower exploration.</p>

    <p class="listbulletcxspmiddle"><span class="calibre17">·<span class="calibre14">     </span></span> <span class="italics">Cognitive constant is set to 0.35.</span> Because this constant is less than the social constant, the social component is favored over an individual particle’s cognitive component.</p>

    <p class="listbulletcxsplast"><span class="calibre17">·<span class="calibre14">     </span></span> <span class="italics">Social constant is set to 0.45.</span> Because this constant is more than the cognitive constant, the social component is favored. Particles put more weight on the best values found by the swarm.</p>

    <p class="body1">Figure 7.23 describes the calculations of the inertia component, cognitive component, and social component for the velocity update formula.</p>

    <p class="body1">A walkthrough of the calculation is described in figure 7.23 for particle 1 in the list.</p>

    <p class="figure"><img alt="07_23" class="calibre11" src="../Images/07_23.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.23 Particle velocity calculation walkthrough</p>

    <p class="body1">After these calculations have been completed for all particles, the velocity of each particle is updated, as represented in table 7.5.</p>

    <p class="tablecaption">Table 7.5 Data attributes for each particle</p>

    <table border="1" cellpadding="0" cellspacing="0" char="505" class="msotablegrid3">
      <tr class="calibre54">
        <td char="63" class="calibre73">
          <div class="calibre26">
            <p class="tablehead">Particle</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Velocity</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Current aluminum</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Current plastic</p>
          </div>
        </td>

        <td char="63" class="calibre75">
          <div class="calibre26">
            <p class="tablehead">Current fitness</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Best aluminum</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Best plastic</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Best fitness</p>
          </div>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">2.295</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">7</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1">296</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">7</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">296</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">2</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">1.626</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">9</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1">104</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">9</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">104</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">3</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">2.043</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-10</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1">80</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-10</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">80</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">4</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">1.35</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-2</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-5</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1">365</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-2</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-5</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">365</p>
        </td>
      </tr>
    </table>

    <p class="head2">Position update</p>

    <p class="body1">Now that we understand how velocity is updated, we can update the current position of each particle, using the new velocity (figure 7.24).</p>

    <p class="figure"><img alt="07_24" class="calibre11" src="../Images/07_24.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.24 Calculating the new position of a particle</p>

    <p class="body1">By adding the current position and new velocity, we can determine the new position of each particle is determined and update the table of particle attributes with the new velocities. Then the fitness of each particle is calculated again, given its new position, and its best position is remembered.</p>

    <p class="tablecaption">Table 7.6 Data attributes for each particle</p>

    <table border="1" cellpadding="0" cellspacing="0" char="505" class="msotablegrid3">
      <tr class="calibre54">
        <td char="63" class="calibre73">
          <div class="calibre26">
            <p class="tablehead">Particle</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Velocity</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Current aluminum</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Current plastic</p>
          </div>
        </td>

        <td char="63" class="calibre75">
          <div class="calibre26">
            <p class="tablehead">Current fitness</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Best aluminum</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Best plastic</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Best fitness</p>
          </div>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">2.295</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">9.925</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">3.325</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1">721.286</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">7</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">296</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">2</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">1.626</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0.626</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">10</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1">73.538</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0.626</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">10</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">73.538</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">3</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">2.043</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">7.043</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">1.043</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1">302.214</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-10</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">80</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">4</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">1.35</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-0.65</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-3.65</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1">179.105</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-0.65</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-3.65</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">179.105</p>
        </td>
      </tr>
    </table>

    <p class="body1">Calculating the initial velocity for each particle in the first iteration is fairly simple because there was no previous best position for each particle—only a swarm best position that affected only the social component.</p>

    <p class="body1">Let’s examine what the velocity update calculation will look like with the new information for each particle’s best position and the swarm’s new best position.</p>

    <p class="body1">A walkthrough of the calculation is described in figure 7.25 for particle 1 in the list.</p>

    <p class="figure"><img alt="07_25" class="calibre11" src="../Images/07_25.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.25 Particle velocity calculation walkthrough</p>

    <p class="body1">In this scenario, the cognitive component and the social component both play a role in updating the velocity, whereas the scenario described in 7.23 was influenced by the social component, due to it being the first iteration.</p>

    <p class="body1">Particles move to different positions over several iterations. Figure 7.26 depicts the particles’ movement and their convergence on a solution.</p>

    <p class="figure"><img alt="07_26" class="calibre11" src="../Images/07_26.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.26 A visualization of the movement of particles in the search space</p>

    <p class="body1">In the last frame of figure 7.26, all the particles have converged in a specific region in the search space. The best solution from the swarm will be used as the final solution. In real-world optimization problems, it is not possible to visualize the entire search space (which would make optimization algorithms unnecessary). But the function that we used for the drone example is a known function, called the Booth function. By mapping it to the 3D Cartesian plane, we can see that the particles indeed converge on the minimum point in the search space (figure 7.27).</p>

    <p class="figure"><img alt="07_27" class="calibre11" src="../Images/07_27.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.27 Visualization of convergence of particles and a known surface</p>

    <p class="body1">After using the particle swarm optimization algorithm for the drone example, we find that the optimal ratio of aluminum and plastic to minimize drag and wobble is 1:3—that is, 1 part aluminum and 3 parts plastic. When we feed these values into the fitness function, the result is 0, which is the minimum value for the function.</p>

    <p class="codelistingcaption">Pseudocode</p>

    <p class="body1">The update step can seem to be daunting, but if the components are broken into simple focused functions, the code becomes simpler and easier to write, use, and understand. The first functions are the inertia calculation function, the cognitive acceleration function, and the social acceleration function. We also need a function to measure the distance between two points, which is represented by squaring the sum of the square of the difference in x values summed with the square of the difference in the y values.</p>

    <p class="figure"><img alt="07_27a" class="calibre11" src="../Images/07_27a.png"/><br class="calibre12"/></p>

    <p class="body1">The cognitive component is calculated by finding the cognitive acceleration, using the function that we defined earlier in section 7.5.3, and the distance between the particle’s best position and its current position.</p>

    <p class="figure"><img alt="07_27b" class="calibre11" src="../Images/07_27b.png"/><br class="calibre12"/></p>

    <p class="body1">The social component is calculated by finding the social acceleration, using the function that we defined earlier in section 7.5.3, and the distance between the swarm’s best position and the particle’s current position.</p>

    <p class="figure"><img alt="07_27c" class="calibre11" src="../Images/07_27c.png"/><br class="calibre12"/></p>

    <p class="body1">The update function wraps everything that we have defined to carry out the actual update of a particle’s velocity and position. The velocity is calculated by using the inertia component, cognitive component, and social component. The position is calculated by adding the new velocity to the particle’s current position.</p>

    <p class="figure"><img alt="07_27d" class="calibre11" src="../Images/07_27d.png"/><br class="calibre12"/></p>

    <p class="head2">Exercise: Calculate the new velocity and position for particle 1 given the following information about the particles</p>

    <p class="listbulletcxspfirst1"><span class="calibre17">·<span class="calibre14">     </span></span> Inertia is set to 0.1.</p>

    <p class="listbulletcxspmiddle"><span class="calibre17">·<span class="calibre14">     </span></span> The cognitive constant is set to 0.5, and the cognitive random number is 0.2.</p>

    <p class="listbulletcxsplast"><span class="calibre17">·<span class="calibre14">     </span></span> The social constant is set to 0.5, and the cognitive random number is 0.5.</p>

    <table border="1" cellpadding="0" cellspacing="0" char="505" class="msotablegrid3">
      <tr class="calibre54">
        <td char="63" class="calibre73">
          <div class="calibre26">
            <p class="tablehead">Particle</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Velocity</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Current aluminum</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Current plastic</p>
          </div>
        </td>

        <td char="63" class="calibre75">
          <div class="calibre26">
            <p class="tablehead">Current fitness</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Best aluminum</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Best plastic</p>
          </div>
        </td>

        <td char="63" class="calibre74">
          <div class="calibre26">
            <p class="tablehead">Best fitness</p>
          </div>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">3</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">4</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">8</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1">721.286</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">7</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">296</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">2</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">4</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">3</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">3</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1">73.538</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">0.626</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">10</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">73.538</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">3</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">6</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">2</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1">302.214</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-10</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">1</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">80</p>
        </td>
      </tr>

      <tr class="calibre54">
        <td char="63" class="calibre76">
          <p class="tablebody1">4</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">2</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">2</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">5</p>
        </td>

        <td char="63" class="calibre78">
          <p class="tablebody1">179.105</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-0.65</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">-3.65</p>
        </td>

        <td char="63" class="calibre77">
          <p class="tablebody1">179.105</p>
        </td>
      </tr>
    </table>

    <p class="head2">Solution: Calculate the new velocity and position for particle 1 given the following information about the particles</p>

    <p class="figure"><img alt="07_27e" class="calibre11" src="../Images/07_27e.png"/><br class="calibre12"/></p>

    <h3 class="head1" id="sigil_toc_id_128">7.5.4<span class="calibre15">  </span> Determine the stopping criteria</h3>

    <p class="body1">The particles in the swarm cannot keep updating and searching indefinitely. A stopping criteria needs to be determined to allow the algorithm to run for a reasonable number of iterations to find a suitable solution.</p>

    <p class="figure"><img alt="07_28" class="calibre11" src="../Images/07_28.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.28 Reached stopping condition</p>

    <p class="body1">The number of iterations influences several aspects of finding solutions, including</p>

    <p class="listbulletcxspfirst1"><span class="calibre17">·<span class="calibre14">     </span></span> <span class="italics">Exploration</span><span class="body1char">—Particles require time to explore the search space to find areas with better solutions. Exploration is also influenced by the constants defined in the update velocity function.</span></p>

    <p class="listbulletcxsplast"><span class="body1char1">·<span class="calibre14">     </span></span> <span class="italics">Exploitation</span><span class="body1char">—Particles should converge on a good solution after reasonable exploration occurs.</span></p>

    <p class="body1">A strategy to stop the algorithm is to examine the best solution in the swarm and determine whether it is stagnating. Stagnation occurs when the value of the best solution doesn’t change or doesn’t change by a significant amount. Running more iterations in this scenario will not help find better solutions. When the best solution stagnates, the parameters in the update function can be adjusted to favor more exploration. If more exploration is desired, this adjustment usually means more iterations. Stagnation could mean that a good solution was found or that that the swarm is stuck on a local best solution. If enough exploration occurred at the start, and the swarm gradually stagnates, the swarm has converged on a good solution.</p>

    <p class="figure"><img alt="07_29" class="calibre11" src="../Images/07_29.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.29 Exploration converging and exploiting</p>

    <h2 class="head" id="sigil_toc_id_129">7.6<span class="calibre10">     </span> Use cases for particle swarm optimization algorithms</h2>

    <p class="body1">Particle swarm optimization algorithms are interesting because they simulate a natural phenomenon, which makes them easier to understand, but they can be applied to a range of problems at different levels of abstraction. This chapter looked at an optimization problem for drone manufacturing, but particle swarm optimization algorithms can be used in conjunction with other algorithms, such as artificial neural networks, playing a small but critical role in finding good solutions.</p>

    <p class="body1">One interesting application of a particle swarm optimization algorithm is deep brain stimulation. The concept involves installing probes with electrodes into the human brain to stimulate it to treat conditions such as Parkinson’s disease. Each probe contains electrodes that can be configured in different directions to treat the condition correctly per patient. Researchers at the University of Minnesota have developed a particle swarm optimization algorithm to optimize the direction of each electrode to maximize the region of interest, minimize the region of avoidance, and minimize energy use. Because particles are effective in searching these multidimensional problem spaces, the particle swarm optimization algorithm is effective for finding optimal configurations for electrodes on the probes.</p>

    <p class="figure"><img alt="07_30" class="calibre11" src="../Images/07_30.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.30 Example of factors involved for probes in deep brain stimulation</p>

    <p class="body1">Here are some other real-world applications of particle swarm optimization algorithms:</p>

    <p class="listbullet"><span class="calibre17">·<span class="calibre14">     </span></span> <span class="italics">Optimizing weights in an artificial neural network</span>—Artificial neural networks are modeled on an idea of how the human brain works. Neurons pass signals to other neurons, and each neuron adjusts the signal before passing it on. An artificial neural network uses weights to adjust each signal. The power of the network is finding the right balance of weights to form patterns in relationships of the data. Adjusting weights is computationally expensive, as the search space is massive. Imagine having to brute-force every possible decimal number combination for 10 weights. That process would take years.</p>

    <p class="listbody">Don’t panic if this concept sounds confusing. We explore how artificial neural networks operate in chapter 9. Particle swarm optimization can be used to adjust the weights of neural networks faster, because it seeks optimal values in the search space without exhaustively attempting each one.</p>

    <p class="listbulletcxspfirst1"><span class="calibre17">·<span class="calibre14">     </span></span> <span class="italics">Motion tracking in videos</span><span class="body1char">—</span>Motion tracking of people is a challenging task in computer vision. The goal is to identify the poses of people and imply a motion by using the information from the images in the video alone. People move differently, even though their joints move similarly. Because the images contain many aspects, the search space becomes large, with many dimensions to predict the motion for a person. Particle swarm optimization works well in high-dimension search spaces and can be used to improve performance of motion tracking and prediction.</p>

    <p class="listbulletcxsplast"><span class="calibre17">·<span class="calibre14">     </span></span> <span class="italics">Speech enhancement in audio</span><span class="body1char">—</span>Audio recordings are nuanced. There is always background noise that may interfere with what someone is saying in the recording. A solution is to remove the noise from recorded speech audio clips. A technique used for this purpose is filtering the audio clip with noise and comparing similar sounds to remove the noise in the audio clip. This solution is still complex, as reduction of certain frequencies may be good for parts of the audio clip but may deteriorate other parts of it. Fine searching and matching must be done for good noise removal. Traditional methods are slow, as the search space is large. Particle swarm optimization works well in large search spaces and can be used to speed the process of removing noise from audio clips.</p>

    <p class="figure"><img alt="07_31" class="calibre11" src="../Images/07_31.png"/><br class="calibre12"/></p>

    <p class="figurecaption">Figure 7.31 Summary of Particle swarm optimization</p>
  </div>
</body>
</html>
